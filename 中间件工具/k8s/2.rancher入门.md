---
title: 2.rancher入门

author: seven

avatar: https://sevenpic.oss-cn-beijing.aliyuncs.com/img/seven.jpg

authorLink: yjl.cool

authorAbout: 不懂猫，更不懂开发的人

authorDesc: 

categories: 技术

comments: true

date: 2021-08-23 22:20:28

tags: 

keywords: 

description: null

photos: null

---
## 1.使用rancher搭建k8s环境

![image-20210407144524349](https://sevenpic.oss-cn-beijing.aliyuncs.com/img/image-20210407144524349.png)

1. 选择自定义Kubernetes集群创建

![image-20210407150603501](https://sevenpic.oss-cn-beijing.aliyuncs.com/img/image-20210407150603501.png)

![image-20210407150803856](https://sevenpic.oss-cn-beijing.aliyuncs.com/img/image-20210407150803856.png)

> 更多集群设置参考：

2. 主机请务必勾选三个

![image-20210407151323596](https://sevenpic.oss-cn-beijing.aliyuncs.com/img/image-20210407151323596.png)

> 选择主机角色,端口放行请参考: https://rancher.com/docs/rancher/v2.x/en/installation/references/

centos7安装docker说明见：

3. 复制到机器中等待docker容器的启动

![image-20210407171105840](https://sevenpic.oss-cn-beijing.aliyuncs.com/img/image-20210407171105840.png)

添加完毕后

![image-20210407171121818](https://sevenpic.oss-cn-beijing.aliyuncs.com/img/image-20210407171121818.png)

等待k8s集群启动

4. 校验

   ![image-20210407174758784](2.rancher入门图片/image-20210407174758784.png)

## 2.部署服务

> 以nacos2.0.0为例子

1. 选择k8s集群并建立建立nacos服务

   ![image-20210407175803957](https://sevenpic.oss-cn-beijing.aliyuncs.com/img/image-20210407175803957.png)

   ![image-20210407175835574](2.rancher入门图片/image-20210407175835574.png)

2. 配置服务信息

   网络模式参考：

   ![image-20210407181906683](https://sevenpic.oss-cn-beijing.aliyuncs.com/img/image-20210407181906683.png)

   环境变量设置

   此处为单机版，并配置mysql存储了

   ```properties
   MODE=standalone
   MYSQL_SERVICE_DB_NAME=nacos-dev
   MYSQL_SERVICE_HOST=10.202.83.203
   MYSQL_SERVICE_PASSWORD=GSAdmin123
   MYSQL_SERVICE_PORT=3306
   MYSQL_SERVICE_USER=root
   SPRING_DATASOURCE_PLATFORM=mysql
   ```

3. 校验并测试

   ![image-20210407182020231](https://sevenpic.oss-cn-beijing.aliyuncs.com/img/image-20210407182020231.png)

   点击：31330/tcp 调整并访问：http://主机地址:31330/nacos/